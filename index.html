<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo list</title>

    <style>
        .done {
            text-decoration: line-through;
        }
    </style>
</head>

<body>
    <fieldset>
        <legend>Todo list</legend>
        <form onsubmit="enviar()">
            <input type="text" name="descricao" value="" placeholder="digite aqui" />
            <input type="submit" value="Adicionar" />
        </form>
    </fieldset>

    <ul></ul>

    <script>
        const lista = []

        function enviar() {
            event.preventDefault()
            const allFields = [...event.target.elements]
            const descricao = allFields.find(item => item.name === 'descricao')

            if (descricao.value === "") return
            if (lista.includes(descricao.value)) return

            lista.push(descricao.value);


            const checkbox = document.createElement("input");
            checkbox.type = 'checkbox'
            checkbox.onchange = (e) => {
                if (e.target.checked) {
                    e.target.parentElement.className = 'done'
                } else {
                    e.target.parentElement.style.textDecoration = 'auto'
                }
                // if (e.target.checked) {
                //     e.target.parentElement.style.textDecoration = 'line-through'
                // } else {
                //     e.target.parentElement.style.textDecoration = 'auto'
                // }
            }

            const li = document.createElement("li");
            const spanDesc = document.createElement("span");
            spanDesc.innerText = descricao.value
            event.target.reset()
            // descricao.value = ''
            // li.innerHTML = `<input type='checkbox'/>${descricao.value}`
            li.append(checkbox, spanDesc)


            document.querySelector("ul").appendChild(li);

        }


    </script>
</body>

</html>